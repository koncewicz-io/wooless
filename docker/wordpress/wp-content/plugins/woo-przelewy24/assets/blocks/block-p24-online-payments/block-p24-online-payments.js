(()=>{"use strict";const e=window.wp.htmlEntities,t=window.React,s=window.wp.i18n,n=window.ReactJSXRuntime,{CheckboxControl:i}=window.wc.blocksCheckout,o=t=>{const{description:s}=t;return(0,e.decodeEntities)(s||"")},a=e=>{let{src:t,name:s=""}=e.icon;return"string"==typeof e.icon&&(t=e.icon),(0,n.jsx)("img",{style:{maxHeight:"20px"},src:t,title:s,alt:s,loading:"lazy"})},r=e=>{const{icons:t,additional:i}=e;return t.length?(0,n.jsxs)("span",{style:{display:"flex",flexWrap:"wrap",gap:"6px",fontSize:"65%",alignItems:"center",justifyContent:"flex-end"},children:[t.map((({src:e,name:t},s)=>(0,n.jsx)(a,{icon:{src:e,name:t}},s))),i?(0,n.jsx)("span",{style:{lineHeight:"1.2"},children:(0,s.sprintf)((0,s.__)("+%d other methods","woocommerce-p24"),i)}):""]}):""},l=({required:e=!1,label:t,checked:s,onChange:o,...a})=>(0,n.jsx)(i,{required:e,label:(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:t}}),checked:s,onChange:o,...a,__nextHasNoMarginBottom:!0}),c=e=>{const{PaymentMethodLabel:t}=e.components,{label:s,icon:i,icons:o,additional:l}=e;return(0,n.jsxs)("span",{style:{width:"100%",display:"flex",gap:"12px",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)(t,{text:s}),o?(0,n.jsx)(r,{icons:o,additional:l}):"",i?(0,n.jsx)(a,{icon:i}):""]})};function d(e,s){const[n,i]=(0,t.useState)(""),[o,a]=(0,t.useState)(!1),[r,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{r&&i(c&&!o?s:"")}),[o,c,r]),[o,n,t=>{r||l(!0),e&&e.setRegulation(t),a(t)},(e=!0)=>{let t=!1;return e&&!o?(i(s),t=!1):(e&&o||!e)&&(i(""),t=!0),t},e=>{e||i(""),d(e)}]}const{registerPaymentMethod:m}=window.wc.wcBlocksRegistry,{getSetting:p}=window.wc.wcSettings,{ValidationInputError:u}=window.wc.blocksCheckout,h=p("p24-online-payments_data",{}),x=(0,e.decodeEntities)(h.title),j=h.i18n||{},g=({method:e,current:t=null,onSelect:s})=>{let i="p24-method-item";return e.id===t&&(i+=" p24-method-item--active"),(0,n.jsxs)("div",{className:i,onClick:()=>{s(e.id===t?null:e.id)},children:[(0,n.jsx)("picture",{children:(0,n.jsx)("img",{src:e.mobileImgUrl,alt:e.name})}),(0,n.jsx)("span",{children:e.name})]})},y=({eventRegistration:e,emitResponse:s})=>{const{responseTypes:i}=s,{onPaymentSetup:a}=e,[r,c]=(0,t.useState)(null),[m,p]=(0,t.useState)([]),[x,y]=(0,t.useState)([]),[f,b,w,S,R]=d(null,j.error.rules);return(0,t.useEffect)((()=>{const e=a((()=>{const e={type:i.ERROR};return S(r)?(e.type=i.SUCCESS,e.meta={paymentMethodData:{method:!!r&&r.toString(),regulation:f}},e):e}));return()=>{e()}}),[i.ERROR,i.SUCCESS,a,r,f,b]),(0,t.useEffect)((()=>{let e=[];h?.methods?.items&&"object"==typeof h.methods.items&&!Array.isArray(h.methods.items)?e=Object.values(h.methods.items):Array.isArray(h?.methods?.items)?e=h.methods.items:console.warn("settings.methods.items is not Object or Array:",h?.methods?.items),y(e.filter((e=>e&&e.featured))),p(e.filter((e=>e&&!e.featured)))}),[h]),(0,t.useEffect)((()=>{R(!!r)}),[r]),(0,n.jsxs)("div",{className:"p24-payment-container",children:[h.description&&(0,n.jsx)(o,{description:h.description}),h.methods.show&&(0,n.jsxs)("div",{className:"p24-methods",children:[x.length>0&&(0,n.jsx)("div",{className:"p24-methods__items p24-methods__items--featured",children:x.map(((e,t)=>(0,n.jsx)(g,{onSelect:c,method:e,current:r},t)))}),m.length>0&&(0,n.jsx)("div",{className:"p24-methods__items",children:m.map(((e,t)=>(0,n.jsx)(g,{onSelect:c,method:e,current:r},t)))})]}),h.methods.show&&(0,n.jsxs)("div",{className:"p24-checkbox",children:[(0,n.jsx)(l,{required:r,label:j.label.regulation,checked:f,onChange:w}),b?(0,n.jsx)(u,{errorMessage:b}):""]})]})},f=({eventRegistration:e,emitResponse:s})=>{const{responseTypes:i}=s,{onPaymentSetup:o}=e,[a,r,c,m]=d(null,j.error.rules);return(0,t.useEffect)((()=>{const e=o((()=>{const e={type:i.ERROR};return m()?(e.type=i.SUCCESS,e.meta={paymentMethodData:{regulation:a}},e):e}));return()=>{e()}}),[i.ERROR,i.SUCCESS,o,a,r]),(0,n.jsx)("div",{className:"p24-payment-container",children:(0,n.jsxs)("div",{className:"p24-checkbox",children:[(0,n.jsx)(l,{required:!0,label:j.label.regulation,checked:a,onChange:c}),r?(0,n.jsx)(u,{errorMessage:r}):""]})})};h.featured.length&&h.featured.forEach((e=>{m({name:`${h.name}-${e.id}`,label:(0,n.jsx)(c,{label:e.name,icon:e.mobileImgUrl}),content:(0,n.jsx)(f,{}),edit:(0,n.jsx)(o,{}),canMakePayment:()=>!0,ariaLabel:x,placeOrderButtonLabel:j.label.submit,supports:{features:h.supports},priority:1})})),m({name:h.name,label:h.info.show?(0,n.jsx)(c,{label:x,icons:h.info.icons,additional:h.info.additional}):(0,n.jsx)(c,{label:x,icon:h.info.icon}),content:(0,n.jsx)(y,{}),edit:(0,n.jsx)(o,{description:h.description}),canMakePayment:()=>!0,ariaLabel:x,paymentMethodId:h.name,placeOrderButtonLabel:j.label.submit,supports:{features:h.supports},priority:10})})();